{"version":3,"sources":["file:///Users/alekseyskorobogaty/Projects/endurance-lab.io/themes/e-lab/assets/js/main.js"],"sourcesContent":["const hero = document.getElementById('hero');\nconst logo = document.getElementById('logo');\nconst arrow = document.getElementById('arrow');\nconst triangles = document.getElementById('triangles');\nconst triBeige = document.getElementById('tri-beige');\nconst triBlue = document.getElementById('tri-blue');\nconst triPink = document.getElementById('tri-pink');\n\nconst isMobile = window.matchMedia('(pointer: coarse)').matches;\nconst logoR = logo.offsetWidth / 2;\n\nconst MOBILE_REST = {\n  x: window.innerWidth * 0.6 - logoR,\n  y: window.innerHeight * 0.2 - logoR,\n};\n\n/* ──────────── Хелпер треугольников ─────────── */\nfunction updateTriangles(cx, cy) {\n  const w = window.innerWidth,\n    h = window.innerHeight;\n  triBeige.setAttribute('points', `${cx},${cy} 0,0 0,${h}`);\n  triBlue.setAttribute('points', `${cx},${cy} 0,0 ${w},0`);\n  triPink.setAttribute('points', `${cx},${cy} ${w},0 ${w},${h}`);\n}\n\n/* ──────────── Начальная позиция ─────────── */\ngsap.set(logo, {\n  x: isMobile ? MOBILE_REST.x : window.innerWidth / 2 - logoR,\n  y: isMobile ? MOBILE_REST.y : window.innerHeight / 2 - logoR,\n  scale: 2,\n  transformOrigin: '50% 50%',\n});\n\nupdateTriangles((isMobile ? MOBILE_REST.x : window.innerWidth / 2) + logoR, (isMobile ? MOBILE_REST.y : window.innerHeight / 2) + logoR);\n/* ──────────── Плавное следование за курсором ─────────── */\nconst FOLLOW_DUR = 1.2;\nlet isPinned = false;\nlet currentPinnedSection = null;\n\nfunction followPointer(e) {\n  if (isPinned) return;\n  const targetX = e.clientX - logoR;\n  const targetY = e.clientY - logoR;\n  gsap.to(logo, {\n    x: targetX,\n    y: targetY,\n    duration: FOLLOW_DUR,\n    ease: 'power2.out',\n    overwrite: 'auto',\n    onUpdate: () =\u003e {\n      const r = logo.getBoundingClientRect();\n      updateTriangles(r.left + r.width * 0.5, r.top + r.height * 0.5);\n    },\n  });\n}\nif (!isMobile) {\n  window.addEventListener('pointermove', followPointer);\n}\n\n/* ──────────── Ресайз ─────────── */\nwindow.addEventListener('resize', () =\u003e {\n  const r = logo.getBoundingClientRect();\n  updateTriangles(r.left + r.width * 0.5, r.top + r.height * 0.5);\n});\n\nfunction updateCenter() {\n  const r = logo.getBoundingClientRect();\n  updateTriangles(r.left + r.width * 0.5, r.top + r.height * 0.5);\n}\n\nfunction toggleHeroAssets() {\n  const heroRect = hero.getBoundingClientRect();\n  const pct = Math.min(Math.max(-heroRect.top / heroRect.height, 0), 1);\n  const shrink = pct \u003e= 0.1;\n  gsap.to(logo, { scale: shrink ? 0.8 : 2.2, duration: 0.2, ease: 'power1.inOut', overwrite: 'auto', onUpdate: updateCenter });\n  gsap.to(arrow, { opacity: shrink ? 0 : 1, duration: 0.2, ease: 'power1.inOut', overwrite: 'auto' });\n}\ntoggleHeroAssets();\ndocument.addEventListener('scroll', toggleHeroAssets, { passive: true });\n\n/* ──────────── Логика «прилипания» ─────────── */\nconst pinSections = Array.from(document.querySelectorAll('section')).filter((s) =\u003e s.id \u0026\u0026 s.id.startsWith('section'));\n\nfunction updatePinPosition() {\n  if (!isPinned || !currentPinnedSection) return;\n  const heading = currentPinnedSection.querySelector('h2');\n  if (!heading) return;\n  const rect = heading.getBoundingClientRect();\n\n  let targetX, targetY;\n\n  if (isMobile) {\n    targetX = rect.left;\n    targetY = rect.top - logoR * 2 - 16;\n  } else {\n    targetX = rect.left - logoR * 2 - 16;\n    targetY = rect.top + rect.height / 2 - logoR;\n  }\n\n  // const targetX = rect.left - 16 - logoR * 2;\n  // const targetY = rect.top + rect.height / 2 - logoR;\n  gsap.to(logo, { x: targetX, y: targetY, duration: 0.2, ease: 'power1.inOut', overwrite: 'auto', onUpdate: updateCenter });\n}\n\nfunction handlePinScroll() {\n  let nextSection = null;\n  for (let i = 0; i \u003c pinSections.length - 1; i++) {\n    const rect = pinSections[i].getBoundingClientRect();\n    const progress = -rect.top / rect.height;\n    if (progress \u003e= 0.5) {\n      nextSection = pinSections[i + 1];\n    }\n  }\n\n  if (nextSection !== currentPinnedSection) {\n    if (nextSection) {\n      isPinned = true;\n      currentPinnedSection = nextSection;\n      updatePinPosition();\n    } else {\n      isPinned = false;\n      currentPinnedSection = null;\n\n      if (isMobile) {\n        gsap.to(logo, {\n          x: MOBILE_REST.x,\n          y: MOBILE_REST.y,\n          duration: 0.3,\n          ease: 'power2.out',\n          overwrite: 'auto',\n          onUpdate: updateCenter,\n        });\n      }\n    }\n  }\n\n  if (isPinned) updatePinPosition();\n}\ndocument.addEventListener('scroll', handlePinScroll, { passive: true });\n"],"mappings":"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","names":[]}